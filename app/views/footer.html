      </section>
	</div>
  </div>
	
  <!-- jQuery -->
  <script src="../../ui/assets/plugins/jquery/jquery.min.js"></script>
  <script src="https://repo.rachmat.id/jquery-ui-1.12.1/jquery-ui.js"></script>
  <script src="../../ui/assets/js/popper.min.js"></script>
  <script src="../../ui/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../../ui/assets/js/jquery.nicescroll.min.js"></script>
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script> -->
  <script src="../../ui/assets/js/jquery.number.min.js"></script>
  <!-- DataTables -->
  <script src="../../ui/assets/plugins/datatables/jquery.dataTables.js"></script>
  <script src="../../ui/assets/plugins/datatables-bs4/js/dataTables.bootstrap4.js"></script>
  <!-- Js Application -->
  <script src="../../ui/assets/js/stisla.js"></script>
  <script src="../../ui/assets/js/scripts.js"></script>
  <script src="../../ui/assets/js/custom.js"></script>
  <!-- Chart Js -->
  <script src="../../ui/assets/plugins/chart.js/Chart.min.js"></script>
  
  <!-- Datatable Data -->
  <include href="datatables/user.html">
  <include href="datatables/model.html">
  <include href="datatables/customer.html">
  <include href="datatables/item.html">
  <include href="datatables/stock.html">
  <include href="datatables/supplier.html">
  <include href="datatables/purchase.html">
  <include href="datatables/quotation.html">
  <include href="datatables/invoice.html">
  <include href="datatables/invoice_ppn.html">
  <include href="datatables/invoice_cash.html">
  
  <include href="home/chart.html">
  
  <script>
	/* ============================================================== */
	/* Autocomplete input off										= */
	/* ============================================================== */
	
	// Customer
	var data = "../../app/views/autocomplete/customer.php";
	$("input[name=customer_code]").autocomplete({
	  source: data,
	  minLength: 3,
	  select: function(event, ui){
        $(this).val(ui.item.customer_code);
		return false;
      }
	}).autocomplete("instance")._renderItem = function(ul, item){
      return $("<li>")
        .append("<div style='font-size:12px; line-height:20px'><span style='display:block'><b>" + item.customer_code + "</b></span><span><i>" + item.customer_name + "</i> | <i>" + item.customer_address + "</i> | <i>" + item.customer_city + "</i></span></div>")
        .appendTo(ul);
    };
	
	// Item
	var data = "../../app/views/autocomplete/item.php";
	$(".item").autocomplete({
	  source: data,
	  minLength: 3,
	  select: function(event, ui){
        $(this).val(ui.item.item_code);
		$(this).removeClass('item');
        return false;
      }
	}).each(function(){
	  $(this).autocomplete("instance")._renderItem = function(ul, item){
        return $("<li>")
          .append("<div style='font-size:12px; line-height:20px'><span style='display:block'><b>" + item.item_code + "</b></span><span><i>" + item.item_part_no + "</i> | <i>" + item.item_desc + "</i></span></div>")
          .appendTo(ul);
      }
	});
	
	/* ============================================================== */
	/* Inisialisasi Jquery number pada class money-mask				= */
	/* ============================================================== */
	
	$('.number-only').number(true);
	
	/* ============================================================== */
	/* Fungsi input hanya nomer										= */
	/* ============================================================== */
	
	$('.number-only').keypress(function(event){
	  var charCode = (event.which) ? event.which : event.keyCode
	  if (charCode > 31 && (charCode != 46 &&(charCode < 48 || charCode > 57)))
		return false;
	  return true;
	});
	
	/* ============================================================== */
	/* Mencegah enter menyimpan data / submit form					= */
	/* ============================================================== */
	
	$('#main').keydown(function(event){
      if(event.keyCode == 13) {
        event.preventDefault();
        return false;
      }
    });
	
	/* ============================================================== */
	/* Simpel DataTable												= */
	/* ============================================================== */
	
    var table = $('#simple_table').DataTable({
	  "lengthChange": false,
	  "paging": false
	});
	
	$('#searching').on('keyup', function(){
	  table.search(this.value).draw();
    });
	
	/* ============================================================== */
	/* Menangkap data dari modal									= */
	/* ============================================================== */
	
	/* Model */
	$('#update_model').on('show.bs.modal', function(event){
	  var button = $(event.relatedTarget);
	  var model_id = button.data('model_id');
	  var model_code = button.data('model_code');
	  var model_desc = button.data('model_desc');
	  
	  var modal = $(this);
	  modal.find('.modal-title').text('Update : ' + model_code);
	  modal.find('.modal-body input[name=model_id]').val(model_id);
	  modal.find('.modal-body input[name=model_code]').val(model_code);
	  modal.find('.modal-body input[name=model_desc]').val(model_desc);
	});
	
	/* Customer */
	$('#update_customer').on('show.bs.modal', function(event){
	  var button = $(event.relatedTarget);
	  var customer_id = button.data('customer_id');
	  var customer_code = button.data('customer_code');
	  var customer_name = button.data('customer_name');
	  var customer_address = button.data('customer_address');
	  var customer_city = button.data('customer_city');
	  var customer_phone = button.data('customer_phone');
	  var customer_name_other = button.data('customer_name_other');
	  var customer_address_other = button.data('customer_address_other');
	  var customer_city_other = button.data('customer_city_other');
	  var customer_phone_other = button.data('customer_phone_other');
	  var customer_note = button.data('customer_note');
	  
	  var modal = $(this);
	  modal.find('.modal-title').text('Update : ' + customer_code);
	  modal.find('.modal-body input[name=customer_id]').val(customer_id);
	  modal.find('.modal-body input[name=customer_code]').val(customer_code);
	  modal.find('.modal-body input[name=customer_name]').val(customer_name);
	  modal.find('.modal-body textarea[name=customer_address]').val(customer_address);
	  modal.find('.modal-body input[name=customer_city]').val(customer_city);
	  modal.find('.modal-body input[name=customer_phone]').val(customer_phone);
	  modal.find('.modal-body input[name=customer_name_other]').val(customer_name_other);
	  modal.find('.modal-body textarea[name=customer_address_other]').val(customer_address_other);
	  modal.find('.modal-body input[name=customer_city_other]').val(customer_city_other);
	  modal.find('.modal-body input[name=customer_phone_other]').val(customer_phone_other);
	  modal.find('.modal-body textarea[name=customer_note]').val(customer_note);
	});

	/* Item */
	$('#update_item').on('show.bs.modal', function(event){
	  var button = $(event.relatedTarget);
	  var item_id = button.data('item_id');
	  var item_code = button.data('item_code');
	  var item_part_no = button.data('item_part_no');
	  var item_desc = button.data('item_desc');
	  var item_price = button.data('item_price');
	  var item_unit = button.data('item_unit');
	  var item_stamping = button.data('item_stamping');
	  var item_physical = button.data('item_physical');
	  var item_similar = button.data('item_similar');
	  var item_pn = button.data('item_pn');
	  var item_brand_1 = button.data('item_brand_1');
	  var item_bradn_2 = button.data('item_bradn_2');
	  var item_brand_3 = button.data('item_brand_3');
	  var item_note = button.data('item_note');
	  var item_image = button.data('item_image');
	  
	  var modal = $(this);
	  modal.find('.modal-title').text('Update : ' + item_code);
	  modal.find('.modal-body input[name=item_id]').val(item_id);
	  modal.find('.modal-body input[name=item_code]').val(item_code);
	  modal.find('.modal-body input[name=item_part_no]').val(item_part_no);
	  modal.find('.modal-body input[name=item_desc]').val(item_desc);
	  modal.find('.modal-body input[name=item_price]').val(item_price);
	  modal.find('.modal-body input[name=item_unit]').val(item_unit);
	  modal.find('.modal-body input[name=item_stamping]').val(item_stamping);
	  modal.find('.modal-body input[name=item_physical]').val(item_physical);
	  modal.find('.modal-body input[name=item_similar]').val(item_similar);
	  modal.find('.modal-body input[name=item_pn]').val(item_pn);
	  modal.find('.modal-body input[name=item_brand_1]').val(item_brand_1);
	  modal.find('.modal-body input[name=item_bradn_2]').val(item_bradn_1);
	  modal.find('.modal-body input[name=item_brand_3]').val(item_brand_3);
	  modal.find('.modal-body input[name=item_note]').val(item_note);
	  modal.find('.modal-body input[name=item_image]').val(item_image);
	});

	/* Supplier */
	$('#update_supplier').on('show.bs.modal', function(event){
	  var button = $(event.relatedTarget);
	  var supplier_id = button.data('supplier_id');
	  var supplier_code = button.data('supplier_code');
	  var supplier_name = button.data('supplier_name');
	  var supplier_address = button.data('supplier_address');
	  var supplier_city = button.data('supplier_city');
	  var supplier_phone = button.data('supplier_phone');
	  
	  var modal = $(this);
	  modal.find('.modal-title').text('Update : ' + supplier_code);
	  modal.find('.modal-body input[name=supplier_id]').val(supplier_id);
	  modal.find('.modal-body input[name=supplier_code]').val(supplier_code);
	  modal.find('.modal-body input[name=supplier_name]').val(supplier_name);
	  modal.find('.modal-body input[name=supplier_address]').val(supplier_address);
	  modal.find('.modal-body input[name=supplier_city]').val(supplier_city);
	  modal.find('.modal-body input[name=supplier_phone]').val(supplier_phone);
	});
	
	/* ============================================================== */
	/* Fungsi preview image											= */
	/* ============================================================== */
	
	function previewImage(input){
      if(input.files && input.files[0]){
        var reader = new FileReader();

        reader.onload = function(e){
          $('#preview_image').attr('src', e.target.result);
        }

        reader.readAsDataURL(input.files[0]);
      }
    }
	
	/* ============================================================== */
	/* Fungsi get data customer										= */
	/* ============================================================== */
	
	$('input[name=customer_code]').change(function(){
	  $('input[name=customer_id]').empty();
	  $('input[name=customer_name]').empty();
	  $('input[name=customer_phone]').empty();
	  $('input[name=customer_city]').empty();
	  $('input[name=customer_address]').empty();
	  $('input[name=customer_notes]').empty();
	  
	  $.getJSON("{{ @BASE.'/customer/get-data/' }}" + this.value, function(data){
		$.each(data, function(key, value){
		  $('input[name=customer_id]').val(value.customer_id);
		  $('input[name=customer_name]').val(value.customer_name);
		  $('input[name=customer_phone]').val(value.customer_phone);
		  $('input[name=customer_city]').val(value.customer_city);
		  $('input[name=customer_address]').val(value.customer_address);
		  $('input[name=customer_notes]').val(value.customer_notes);
		});
	  });
	});
	
	/* ============================================================== */
	/* Fungsi get data customer										= */
	/* ============================================================== */
	
	$('input[name=supplier_code]').change(function(){
	  $('input[name=supplier_id]').empty();
	  $('input[name=supplier_name]').empty();
	  $('input[name=supplier_address]').empty();
	  $('input[name=supplier_city]').empty();
	  $('input[name=supplier_phone]').empty();
	  
	  $.getJSON("{{ @BASE.'/supplier/get-data/' }}" + this.value, function(data){
		$.each(data, function(key, value){
		  $('input[name=supplier_id]').val(value.supplier_id);
		  $('input[name=supplier_name]').val(value.supplier_name);
		  $('input[name=supplier_address]').val(value.supplier_address);
		  $('input[name=supplier_city]').val(value.supplier_city);
		  $('input[name=supplier_phone]').val(value.supplier_phone);
		});
	  });
	});
	
	/* ============================================================== */
	/* Fungsi get data item											= */
	/* ============================================================== */
	
	function getData(id, val){
	  $('#item_id_' + id).empty();
	  $('#item_part_no_' + id).empty();
	  $('#item_desc_' + id).empty();
	  $('#item_price_' + id).empty();
	  $('#item_brand_' + id).empty();
	  
	  $.getJSON("{{ @BASE.'/item/get-data/' }}" + val, function(data){
		$.each(data, function(key, value){
		  $('#item_id_' + id).val(value.item_id);
		  $('#item_part_no_' + id).val(value.item_part_no);
		  $('#item_desc_' + id).val(value.item_desc);
		  $('#item_price_' + id).val(new Intl.NumberFormat().format(value.item_price));
		  $('#item_price_temp_' + id).val(value.item_price);
		  $('#item_brand_' + id).val(value.item_brand_1);
		});
	  });
	  
	  $('#item_part_no_' + id).attr('readonly', true);
	  $('#item_desc_' + id).attr('readonly', true);
	  $('#item_amount_' + id).attr('readonly', true);
	  
	  $('#item_part_no_' + id).addClass('readonly');
	  $('#item_desc_' + id).addClass('readonly');
	  $('#item_amount_' + id).addClass('readonly');
	  
	  $('#item_qty_' + id).focus();
	}
	
	/* ============================================================== */
	/* Fungsi total													= */
	/* ============================================================== */
	
	function getTotal(id){
	  let item_qty = $('#item_qty_' + id).val();
	  let item_price = $('#item_price_' + id).val();
	  $('#item_amount_' + id).val(new Intl.NumberFormat().format(item_qty * item_price));
	}
	
	/* ============================================================== */
	/* Fungsi clear row												= */
	/* ============================================================== */
	
	function clearRow(id){
	  $('#item_' + id + ' input').val("");
	  $('#item_' + id + ' select').val("");
	  
	  $('#item_part_no_' + id).attr('readonly', false);
	  $('#item_desc_' + id).attr('readonly', false);
	  $('#item_amount_' + id).attr('readonly', false);
	  
	  $('#item_part_no_' + id).removeClass('readonly');
	  $('#item_desc_' + id).removeClass('readonly');
	  $('#item_amount_' + id).removeClass('readonly');
	  
	  let = total = 0;
	  $(".amount").each(function(){
		if($(this).val() !== ""){
		  total += parseInt($(this).val(), 10);
		}
	  });

	  $("#part_charge_display").html(new Intl.NumberFormat().format(total));
	  $("#part_charge").val(total);
	  
	  $("#total_display").html(new Intl.NumberFormat().format(total));
	  $("#total").val(total);
	  
	  // Total keseluruhan
	  let quotation_part_charge = $("#part_charge").val();
	  let quotation_discount = $("#discount").val();
	  let quotation_service_charge = $("#service_charge").val();
	  let quotation_ppn_percentage = $("#ppn").val();
	  
	  let total_no_ppn = (parseInt(quotation_part_charge) + parseInt(quotation_service_charge) - parseInt(quotation_discount));
	  let quotation_ppn =  parseInt(total_no_ppn) * (parseInt(quotation_ppn_percentage) / 100);
	  let grand_total = parseInt(total_no_ppn) + parseInt(quotation_ppn);
	  
	  $("#ppn_display").html(new Intl.NumberFormat().format(quotation_ppn));
	  
	  $("#grand_total_display").html(new Intl.NumberFormat().format(grand_total));
	  $("#grand_total").val(grand_total);
	}
	
	/* ============================================================== */
	/* Fungsi total	part											= */
	/* ============================================================== */
	
	$(".number-only").on("keyup", function(){
	  if($(this).val() == ""){
		$(this).val(0);
	  }
	  let = total = 0;
	  $(".amount").each(function(){
		if($(this).val() !== ""){
		  total += parseInt($(this).val(), 10);
		}
	  });

	  $("#part_charge_display").html(new Intl.NumberFormat().format(total));
	  $("#part_charge").val(total);
	  
	  $("#total_display").html(new Intl.NumberFormat().format(total));
	  $("#total").val(total);
	  
	  // Total keseluruhan
	  let quotation_part_charge = $("#part_charge").val();
	  let quotation_discount = $("#discount").val();
	  let quotation_service_charge = $("#service_charge").val();
	  let quotation_ppn_percentage = $("#ppn").val();
	  
	  let total_no_ppn = (parseInt(quotation_part_charge) + parseInt(quotation_service_charge) - parseInt(quotation_discount));
	  let quotation_ppn =  parseInt(total_no_ppn) * (parseInt(quotation_ppn_percentage) / 100);
	  let grand_total = parseInt(total_no_ppn) + parseInt(quotation_ppn);
	  
	  $("#ppn_display").html(new Intl.NumberFormat().format(quotation_ppn));
	  
	  $("#grand_total_display").html(new Intl.NumberFormat().format(grand_total));
	  $("#grand_total").val(grand_total);
	});

	/* ============================================================== */
	/* Fungsi Notifikasi											= */
	/* ============================================================== */
	
	function showNotification(){
	  if(window.Notification && Notification.permission !== "denied") {
	    Notification.requestPermission(function(status) {  // status is "granted", if accepted by user
		  var n = new Notification('JAMBUL | Belanja Mbulanan', { 
		    body: 'Hai Admin, Ada Pesanan Baru.\nKlik Link Berikut : \nhttp://jblapp.hi-skripsi.xyz',
		    icon: '../../ui/assets/img/AdminLTELogo.png' 
		  });
		  
		  var m = new Notification('JAMBUL | Belanja Mbulanan', { 
		    body: 'Hai Admin, Ada Pesanan Baru.\nKlik Link Berikut : \nhttp://jblapp.hi-skripsi.xyz',
		    icon: '../../ui/assets/img/AdminLTELogo.png' 
		  });
	    });
	  }
	}
  </script>
</body>
</html>